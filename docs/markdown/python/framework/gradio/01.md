# 一、初识Gradio

## 1.1 Gradio介绍
- Gradio是一个用于构建交互式界面的Python库。它可以帮助您快速创建自定义的Web界面，用于展示和测试机器学习模型、自然语言处理模型、计算机视觉模型等。

- Gradio使得构建交互式界面变得非常简单，无需编写繁琐的HTML、CSS和JavaScript代码。您可以使用Gradio来创建一个具有输入字段（如文本输入或图像上传）和输出字段（如模型预测结果）的界面，用户可以直接与您的模型进行交互。

-  Gradio支持多种输入和输出类型，包括文本、图像、音频和视频。您可以通过定义回调函数来处理输入，并将输出返回给用户。Gradio还提供了自动化的界面布局和样式，使得界面设计变得简单而直观。

## 1.2 安装

安装：Gradio需要python版本为3.8以上

```sh
pip install python
pip install gradio

# update
pip install --upgrade gradio -i https://mirror.baidu.com/pypi/simple
```

## 1.3 快速开始（初步了解）


1.  简单小例子

    小例子：将会在浏览器自动弹出（地址： `http://localhost:7860`）

    - 代码示例

        ```python
        import gradio as gr
        
        def greet(name):
            return "Hello " + name + "!"
        demo = gr.Interface(fn=greet, inputs="text", outputs="text")
            
        if __name__ == "__main__":
            demo.launch()   
        ```
    - 函数类型
        - gr.Interface类: 可以使用用户界面包装任何函数
            - fn: 要运行的函数或模型。这个函数接受输入并返回输出。
            - inputs: 输入组件的类型和顺序。可以使用字符串表示组件类型（如"text"、“checkbox”、"slider"等），也可以使用Gradio提供的组件对象（如gr.TextInput()、gr.Checkbox()、gr.Slider()等）。
            - outputs: 输出组件的类型和顺序。同样可以使用字符串或Gradio提供的组件对象表示。

    - 运行结果
        
        ![](/python/framework/gradio/001.png)

2. 多输入多输出

    >注意：输入列表中的每个组件依次对应fn函数中的参数。输出列表中的每个组件都对应于fn函数的返回值，注意按照顺序排列。
    
    - 代码示例

        ```python
        import gradio as gr
        
        def greet(name, is_morning, temperature):
            salutation = "Good morning" if is_morning else "Good evening"
            greeting = f"{salutation} {name}. It is {temperature} degrees today"
            celsius = (temperature - 32) * 5 / 9
            return greeting, round(celsius, 2)
        # 创建一个Gradio界面的实例。fn参数指定了要运行的函数，inputs参数指定了输入组件的类型和顺序，outputs参数指定了输出组件的类型和顺序。在这里，输入组件依次是文本输入、复选框和滑块，输出组件依次是文本输出和数字输出。
        demo = gr.Interface(
            fn=greet,
            # 输入部分为Text组件，checkbox组件、滑块。
            inputs=["text", "checkbox", gr.Slider(0, 100)],
            outputs=["text", "number"],
        )
        demo.launch()
        ```
    - 运行结果

        ![](/python/framework/gradio/002.png)

3. 简易聊天机器人


    - 代码示例
        ```python
        import random
        import gradio as gr
        
        def random_response(message, history):
            return random.choice(["Yes", "No"])
        
        demo = gr.ChatInterface(random_response, title='chatgpt')
        demo.launch()
        ```
    - 函数类型

        - gr.ChatInterface: 专门为聊天机器人UI设计的接口。该接口包装了一个函数，接受message和history作为参数，返回字符串作为相应。title作为标题。
            - message：用户输入的信息
            - history：对话历史
    
    - 运行结果

        ![](/python/framework/gradio/003.png)

## 1.4 场景分类

- gr.Interface(简易场景)
- gr.Blocks(定制化场景)