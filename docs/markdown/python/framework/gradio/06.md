# 六、其他

## 6.1 表格参数

Interface是Gradio的主要高级类，它允许你通过几行代码为一个机器学习模型（或任何Python函数）创建一个基于Web的图形用户界面（GUI）或演示。使用Interface时，你必须指定三个参数：

- 函数：为其创建GUI的函数。这通常是你的机器学习模型或任何你想要用户与之交互的Python函数。

- 输入组件：你希望用户提供的输入类型。这些可以是文本框、文件上传器、滑块、单选按钮等，具体取决于你的函数需要的输入类型。

- 输出组件：你希望展示给用户的输出类型。这可能包括文本、图像、音频或视频等，取决于函数返回的内容。

除了这些基本参数外，你还可以使用其他附加参数来控制演示的外观和行为。例如，你可以设置标题、描述、布局等，以及控制组件的样式和交互方式。

Interface类简化了创建交互式Web应用程序的过程，使得即使不具备前端开发经验的人也能快速构建出功能丰富的界面。此外，由于Gradio是基于Python的，因此你可以利用Python的强大功能和丰富的机器学习库来构建你的模型，并通过Gradio将其呈现给广大用户。



### 6.1.1 实用属性

Interface类提供了多种属性，如layout用于改变输入输出组件的布局，theme用于改变界面主题风格等。


| 参数名称    | 说明   |  描述   |
|------------|--------|--------|
| fn（必须要有的） | fn这一参数是这个Interface要执行的函数，可以认为将输入的数据丢入fn，fn给出对应结果。 | 函数的每个参数对应一个输入组件，并且该函数应返回一个单一值或值的元组，其中元组中的每个元素对应一个输出组件。（输入输出组件与函数参数一一对应） |
| inputs（必须要有的）     | 单一的组件、组件列表、None  | 组件可以是实例化对象传递，也可以通过其字符串快捷方式引用。输入组件的数量应与fn的参数数量匹配。如果设置为None，则只显示输出组件。    |
| outputs （必须要有的）   | 单一的组件、组件列表、None  |   组件可以是实例化对象传递，也可以通过其字符串快捷方式引用。输出组件的数量应与fn的参数数量匹配。如果设置为None，则只显示输入组件。 |
| examples  | default:None  |函数的示例输入，有两点注意： <br> 1.为嵌套列表时其中外部列表由示例组成，每个内部列表由对应于每个输入组件的输入组成。<br> 2.若提供示例目录的字符串路径，应在运行 gradio 应用程序的 python 文件所在的目录中。如果有多个输入组件并提供了一个目录，则必须在目录中提供 log.csv 文件以链接对应的输入。 |
| cache_examples  | default:None   | 缓存示例可加速运行时，适用于HuggingFace Spaces时默认开启。若函数为生成器，则使用最后生成的值作为输出。其他环境默认关闭缓存。|
| examples_per_page | default:10    | 每页展示多少个示例  |
| live              | default:False    | 如果任何输入发生改变，界面是否应该自动重新运行。  |
| title             | default:None  | 接口的标题；如果提供，则以大字体显示在输入和输出组件的上方。在浏览器窗口中打开时，也用作选项卡标题。   |
| description       | default:None   | 接口的描述；如果提供，则出现在输入和输出组件的上方，在标题的下方，以常规字体显示。   |
| article           | default:None  | 解释界面的扩展文章；如果提供，以常规字体出现在输入和输出组件的下方。接受 Markdown 和 HTML 内容。如果是一个可下载远程文件的 HTTP(S) 链接，则显示该文件的内容。   |
| thumbnail         | default:None  | 缩略图，当在社交媒体上分享Web演示时，用于显示图像的字符串路径或URL。 |
| theme             | default:None    |Theme对象或字符串表示一个主题。如果是一个字符串，将寻找一个内置的主题与该名称(例如“soft”或“default”)，或将尝试加载一个主题从Hugging Face Hub(例如“gradio/monochrome”)。如果没有，将使用默认主题。                                       |
| css               | default:None        |自定义css作为一个字符串或css文件的路径。这个css将包括在演示网页中。  |
| js                | default:None      |自定义js或js文件路径，在demo第一次加载时运行。这个javascript将包含在demo网页中。 |
| allow_flagging    | default:None（默认为manual）   | 三个取值：“never”，“auto"或"manual”。用于选取标记输入输出  <br> never:永远不会被标记；    <br> auto:自动标记； <br> manual:点击标记按钮进行标记   |
| flagging_options  | default: None   | 仅在manual时使用   <br> 如果提供，允许用户在标记时从选项列表中进行选择。可以是形式(label, value)的元组列表，其中label是将显示在按钮上的字符串，value是将存储在标记CSV中的字符串；或者它可以是一个字符串列表[“X”， “Y”]，在这种情况下，值将是字符串列表，标签将是[“Flag as X”， “Flag as Y”]，等等。 |
| flagging_dir      | default:flagged  | 如何命名存储标记数据的目录。   |
| flagging_callback | default:flagged  | 当样本被标记时，将调用FlaggingCallback的子类实例。如果设置为None，将创建一个gradio.flagging.CSVLogger实例，日志将保存到flagging_dir中的本地CSV文件。默认为None。      |
| head              | default: None   | 自定义html插入到演示网页的头部。这可以用来添加自定义元标签，脚本，样式表等到页面。    |


### 6.1.2 包含属性

Interface.launch 启动函数

```py
import gradio as gr
def reverse(text):
    return text[::-1]
demo = gr.Interface(reverse, "text", "text")
demo.launch(share=True, auth=("username", "password"))
```

| 参数名                  | 数据类型                | 默认值    | 描述                                                                                                                                            |
|----------------------|---------------------|--------|-----------------------------------------------------------------------------------------------------------------------------------------------|
| inline               | bool/None           | None   | 是否在界面中以内联的方式显示。在Python笔记本中默认为True，其他情况下默认为False。                                                                                              |
| inbrowser            | bool                | FALSE  | 是否自动在默认浏览器的新标签页中打开界面。                                                                                                                         |
| share                | bool/None           | None   | 是否创建一个公共链接，使演示可以被任何人访问。如果未提供，默认为False，除非在Google Colab中运行。                                                                                     |
| debug                | bool                | FALSE  | 如果为True，在Google Colab中需要打印错误时会阻塞主线程。                                                                                                          |
| enable_queue         | bool/None           | None   | 【已弃用】是否启用队列来处理推理请求，用于防止超时。在HuggingFace Spaces中默认为True，在其他情况下默认为False。                                                                         |
| max_threads          | int                 | 40     | 并行生成的线程的最大数量。默认继承自starlette库（当前为40）。无论队列是否启用，都适用。但如果启用了队列，该参数将增加到至少队列的并发数。                                                                    |
| auth                 | Callable/tuple/…    | None   | 如果提供，需要用户名和密码（或用户名-密码元组的列表）来访问界面。还可以提供一个函数，该函数接受用户名和密码并返回True表示有效登录。                                                                          |
| auth_message         | str/None            | None   | 如果提供，将在登录页面上显示的HTML消息。                                                                                                                        |
| prevent_thread_lock  | bool                | FALSE  | 如果为True，界面将在服务器运行时阻塞主线程。                                                                                                                      |
| show_error           | bool                | FALSE  | 如果为True，在界面中显示任何错误，并将其打印到浏览器的控制台日志中。                                                                                                          |
| server_name          | str/None            | None   | 如果设置为"0.0.0.0"，可以使应用在本地网络上可访问。可以通过环境变量GRADIO_SERVER_NAME进行设置。如果为None，则使用"127.0.0.1"。                                                          |
| server_port          | int/None            | None   | 将在该端口上启动Gradio应用程序（如果可用）。可以通过环境变量GRADIO_SERVER_PORT进行设置。如果为None，则从7860开始搜索可用端口。                                                               |
| show_tips            | bool                | FALSE  | 如果为True，将偶尔显示有关Gradio新功能的提示。                                                                                                                  |
| height               | int                 | 500    | 包含界面的iframe元素的高度（如果inline=True时使用）。                                                                                                           |
| width                | int/str             | “100%” | 包含界面的iframe元素的宽度（如果inline=True时使用）。                                                                                                           |
| encrypt              | bool/None           | None   | 【已弃用】。无效果。                                                                                                                                    |
| favicon_path         | str/None            | None   | 如果提供文件的路径（.png、.gif或.ico），将用作Web页面的favicon（网站图标）。                                                                                             |
| ssl_keyfile          | str/None            | None   | 如果提供文件的路径，将用作创建运行在https上的本地服务器的私钥文件。                                                                                                          |
| ssl_certfile         | str/None            | None   | 如果提供文件的路径，将用作https的已签名证书。如果提供了ssl_keyfile，需要提供ssl_certfile。                                                                                   |
| ssl_keyfile_password | str/None            | None   | 如果提供密码，将与https的SSL证书一起使用。                                                                                                                     |
| ssl_verify           | bool                | TRUE   | 如果为False，则跳过证书验证，允许使用自签名证书。                                                                                                                   |
| quiet                | bool                | FALSE  | 如果为True，则抑制大部分打印语句。                                                                                                                           |
| show_api             | bool                | TRUE   | 如果为True，在应用程序的页脚中显示API文档。默认为True。如果启用了队列，则api_open参数的值将决定是否显示API文档，与show_api参数的值无关。                                                           |
| file_directories     | list[str]/None      | None   | 【已重命名为allowed_paths】可以访问的文件路径列表。将在将来的版本中删除。                                                                                                   |
| allowed_paths        | list[str]/None      | None   | 允许Gradio访问的完整文件路径或父目录列表（除了包含Gradio Python文件的目录）。必须是绝对路径。警告：如果提供目录，则这些目录及其子目录中的所有文件都可供应用程序的所有用户访问。                                             |
| blocked_paths        | list[str]/None      | None   | 不允许Gradio访问的完整文件路径或父目录列表（即应用程序的用户不允许访问的路径）。必须是绝对路径。警告：优先于allowed_paths和Gradio默认公开的所有其他目录。                                                     |
| root_path            | str                 | “”     | 应用程序的根路径（或"mount point"），如果应用程序不是从域的根目录(“/”)提供的。通常在应用程序位于转发请求的反向代理后面时使用。例如，如果应用程序在`https://example.com/myapp`提供，则root_path应设置为"/myapp"。LinkTo |
| app_kwargs           | dict[str, Any]/None | None   | 作为参数键和参数值的字典，将附加给底层的FastAPI应用程序。例如，{“docs_url”: “/docs”}。                                                                                     |

## 6.2 错误记录

1. 错误1：`Please set share=True or check your proxy settings to allow access to localh`

![](/python/framework/gradio/017.png)

原因：gradio获取了新版本的数据，但是网络不支持下载所有的数据

解决方式，连上外部网络进行下载，再使用受限制的网络



